<mat-card class="tab-content">
    <mat-card fxLayout="row" fxLayoutAlign="space-between" style="background:lightcyan">
      <div>
          <button mat-button [matMenuTriggerFor]="menu" style="background: #d3d3d34d">
              <span>Sort By:</span> &nbsp;<b style="padding-right: 5px">{{sortBy}}</b>
              <fa-icon [icon]="['fas', 'sort']"></fa-icon>  
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="sort('price')">Price</button>
            <button mat-menu-item (click)="sort('store')">Store</button>
            <button mat-menu-item (click)="sort('dateTime')">Date</button>
          </mat-menu>
      </div> 
      <div> <button mat-button style="background: #d3d3d34d" (click)="addDeal()">Add <fa-icon [icon]="['fas', 'plus']"></fa-icon>  </button></div>      
       
    </mat-card>
  <mat-card fxLayout="row wrap"  fxLayoutAlign="center center" style="padding-top: 10px" >
    <mat-card *ngFor="let element of stateSearch.selectedProduct.deals | sort: sortBy; let i = index"  
    style="background: lightcyan; margin:5px" [ngStyle.xs]="{'width.%': 80}" [ngStyle.gt-xs]="{'width.px': 200}"> 
     <mat-card-content class="content-list" fxLayout="column" fxLayoutAlign="center center" style="margin-bottom: 0px">
      <div style="position:absolute;top:0px; right:0px;padding:10px;" [matMenuTriggerFor]="menu">
        <fa-icon class="only-show-on-hover" [icon]="['fas', 'ellipsis-v']"></fa-icon>
      </div>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="goToLink(element.link)">Open</button>
        <button mat-menu-item (click)="report(element)">Report It</button>
      </mat-menu>
      <div style=" align-self: center;font-size: x-large;margin: 10px">{{100 - ((element.price/stateSearch.selectedProduct.price[(stateSession.country$| async)?.code])*100) | number:'1.0-0'}}%</div>
      <div> <s>{{(stateSession.country$| async)?.currencySymbol }}{{stateSearch.selectedProduct.price[(stateSession.country$| async)?.code]}}</s> &nbsp;<b>{{(stateSession.country$| async)?.currencySymbol }}{{element.price}}</b> {{(stateSession.country$| async)?.currency }}   </div>
      <a color="primary" style="margin: 10px" mat-raised-button href="{{element.link}}" target="_blank" > {{element.store | titlecase}}</a>
    </mat-card-content>
      <mat-card-actions style="padding: 10px; background: #d3d3d34d;">  
        <div fxLayout="row" fxLayoutAlign="space-between">
          <div fxLayout="row">
            <img mat-card-avatar style="width: 30px;background-size: cover;border-radius: 50%;margin-right: 10px;" 
            src="{{element.userPicture}}">  
            <div>
                <div>{{element.userName | titlecase}} </div>
                <div style="font-size: xx-small;">{{element.dateTime.seconds*1000 | date}} </div>
            </div>  
          </div>
          <div fxLayout="row" style="width: 80px;" fxLayoutAlign="space-between">
              <div>
                  <fa-icon *ngIf="user && element.review?.liked.indexOf(user.id) >= 0"  [icon]="['fas', 'thumbs-up']"  ></fa-icon>
                  <fa-icon *ngIf="user && element.review?.liked.indexOf(user.id) == -1" (click)="liked(i)" [icon]="['far', 'thumbs-up']" style="cursor: pointer;"></fa-icon>
                  <fa-icon *ngIf="!user" [icon]="['far', 'thumbs-up']" ></fa-icon>
                   {{element.review?.liked.length}}
              </div>  
              <div>
                  <fa-icon *ngIf="user && element.review?.unliked.indexOf(user.id) >= 0"  [icon]="['fas', 'thumbs-down']" ></fa-icon>
                  <fa-icon *ngIf="user && element.review?.unliked.indexOf(user.id) == -1" (click)="unliked(i)" [icon]="['far', 'thumbs-down']" style="cursor: pointer;"></fa-icon>
                  <fa-icon *ngIf="!user" [icon]="['far', 'thumbs-down']" ></fa-icon>
                   {{element.review?.unliked.length}}
              </div>          
            </div>
        </div> 
                
      </mat-card-actions>
    </mat-card>
  </mat-card>      
</mat-card>
